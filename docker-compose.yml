version: "3.8"

services:
  wordpress-nginx:
    extends:
      file: ./wordpress-nginx/docker-compose.yml
      service: wordpress-nginx
    profiles:
      - build
      - up
    depends_on:
      - wordpress-php-fpm

  wordpress-php-fpm:
    extends:
      file: ./wordpress-php-fpm/docker-compose.yml
      service: wordpress-php-fpm
    profiles:
      - build
      - up
    depends_on:
      - mysql

  mysql:
    image: mariadb:11
    environment:
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: wordpress
      MYSQL_ROOT_PASSWORD: change-me
    volumes:
      - db-data:/var/lib/mysql
    profiles:
      - up

volumes:
  db-data: {}
